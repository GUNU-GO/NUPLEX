{
	"title": "[TIP] Compiling & Runnng 2D PIC code on windows.",
	"content": "  김지헌씨가 개발, 운용중인 2D PIC 코드를 Windows에서 컴파일, 링크하여 실행하는데 성공했습니다. 기본적으로 Windows에서 IDE환경을 이용하여 코드를 수정, 개발하는 것이 더 용이하다고 생각되어 작업을 진행하게 되었습니다.<br><br>개발 환경 : Microsoft Visual Studio 6.0 + Compaq Visual Fortran 6.6<br><br>Linux 환경과는 다르게 몇 가지 신경써야 할 부분이 있어서 추후 참고할 수 있도록 기록합니다.<br><br>#1. Netcdf library<br>2D PIC코드는 Netcdf라는 library를 결과 파일의 입출력에 사용하고 있습니다.<br>이 라이브러리는 ftp://ftp.unidata.ucar.edu/pub/netcdf/contrib/win32/ 에서 win32용 pre-compiled 형태로 구할 수 있습니다. 이 때, .dll, .lib, .inc 파일이 소스 디렉토리에 포함되어 있어야 하며, .dll이 실행파일과 같은 디렉토리에 포함되어 있어야 합니다.<br><br>* 주의할 점은 netcdf 3.5.0 만이 2D PIC코드에 정상적으로 사용가능하다는 점입니다. 다른 버전에서는 unresolved external 링크 에러가 발생하는데, 아마도 코드 자체가 3.5.0 기반으로 작성되었기 때문이라고 생각합니다.<br><br>#2. \"Array bound exceeded\" 런타임 에러<br>이 부분은 코드 자체에서 추후에 문제가 될 소지가 있다고 생각합니다만, 우선 현재 작성되어 있는 코드를 실행시키기 위해서는 옵션에서 설정을 통해 피할 수 있는 문제입니다. 그러나, array의 index bound 문제는 추후에 코드 자체의 안정성 문제에 큰 걸림돌이 될 수 있기 때문에 코드 상에서 보완이 필요할 거라고 생각합니다. 아래와 같이 설정함으로써 실행이 가능해집니다.<br><br>\"Array bound exceeded\"<br>     1. Select \"Project->Setting\". <br>     2. Select \"Fortran\" page. <br>     3. Select \"Category\" to \"Runtime\". <br>     4. Uncheck \"Array and String bounds\"<br><br>#3. \"Stack over flow\" 런타임 에러<br>Stack 사이즈가 windows 상에서는 기본 1MB로 설정되어 있습니다만, 2D PIC 코드 상에서 다수의 function call이 발생하는지 stack over flow 에러가 발생합니다. 아마도 recursive call을 사용하지 않았을까 생각됩니다. 해결 방법은 stack size를 늘려주면 됩니다. 아래와 같이 Reserve 설정을 바꿔주면 됩니다. 16진수 0x40000000로 설정하여 문제가 없었으며 이것은 1GB에 해당합니다.<br><br>     1. Select \"Project->Setting\". <br>     2. Select \"Link\" page. <br>     3. Select \"Category\" to \"Output\". <br>     4. Type your preferred stack size in \"Reserve:\" field under \"Stack allocations\". eg, 32768 in decimal or 0x20000 in hexadecimal. <br><br>추후에 2D PIC 코드를 사용하실 분들은 참고하시기 바라며, 더 궁금하신 점이나 조언 있으시면 말씀해주시면 감사드리겠습니다.<br>"
}